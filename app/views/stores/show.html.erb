<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
<style type="text/css">

#mapCanvas label { width: auto; display:inline; }
#mapCanvas img { max-width: none; }
.gm-style img { max-width: none; }
.gm-style label { width: auto; display: inline; }
</style>






<div class="row" data-ng-app="">
    <div class="col-md-6">
<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @store.to_s %>
</p>

<p>
  <strong>Company:</strong>
  <%= @store.company %>
</p>
<p>
  <strong>Address:</strong>
  <%= @store.address %>
</p>
<p>
  <strong>City:</strong>
  <%= @store.city %>
</p>
<p>
  <strong>Zip:</strong>
  <%= @store.zip %>
</p>
<p><strong>Last visited:</strong>
  <%= @store.visits.empty? ? "No visitations yet" : " #{@store.last_visited} #{"day".pluralize(@store.last_visited)} ago"%>

</p>
<p>
  <strong><%= @store.contact.nil? ? "No primary contact set" : "Primary contact" %></strong>
  <%= @store.contact %>
</p>

<% if @store.contacts.empty? %>
  <strong>No contacts yet!</strong><br><br>
<% else %>
  <strong>All contacts</strong>
<ul class="list-group" style="width:20%">
  <% @store.contacts.each do |contact| %>
  <li class="list-group-item"><%= link_to contact, contact_path(contact.id) %></li>
<% end %>
<% end %>

</ul>

<%= link_to 'Edit', edit_store_path(@store) %> |
<%= link_to 'Back', stores_path %>


    </div>
    <div class="col-md-6">

<div style='width: 100%; height:550px'>
  <div id="geolocation" style='width: 100%; height: 600px;'></div>
</div>
    </div>
  </div>




<script type="text/javascript">
var handler = Gmaps.build('Google');
handler.buildMap({ internal: {id: 'geolocation'} }, function(){
  if(navigator.geolocation)
    navigator.geolocation.getCurrentPosition(displayOnMap);
});

function displayOnMap(position){
  var marker = handler.addMarker({
    lat: -34.397,
    lng: 150.644
  });
  handler.map.centerOn(marker);
};</script>
